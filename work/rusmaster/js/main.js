function preloader() {	if ($('#preloader').length) {		setTimeout(function() {			$('#preloader').fadeOut('slow', function() {				$('body').removeClass('overflow-hidden').css('padding', '');			});		}, 1000);	}}$(window).on('load', preloader);//---------------------------------------//// Подключаем набор написаных скриптов (requare/developRequare.js)//---------------------------------------//// выполняем их после того, как DOM построитсяfunction autoFooter() {  if ($('.wrapper').length) {    var height = $('.footer').innerHeight();    $('.wrapper').css('padding-bottom', height).css('margin-bottom', -height);  }}$(document).ready(function() {   $.reject({    //	header: 'Your browser is not supported here', // Header Text    //	paragraph1: 'You are currently using an unsupported browser', // Paragraph 1    //	paragraph2: 'Please install one of the many optional browsers below to proceed',    //	closeMessage: 'Close this window at your own demise!' // Message below close window link    	 reject: {   		all: false,  		msie: 9,  		chrome: 40,  		firefox: 30,  		safari4: 4  	},   	display: [], // What browsers to display and their order (default set below)  	browserShow: true, // Should the browser options be shown?  	browserInfo: { // Settings for which browsers to display  		chrome: {  			// Text below the icon  			text: 'Google Chrome',  			// URL For icon/text link  			url: 'http://www.google.com/chrome/'  			// (Optional) Use "allow" to customized when to show this option  			// Example: to show chrome only for IE users  			// allow: { all: false, msie: true }  		},  		firefox: {  			text: 'Mozilla Firefox',  			url: 'http://www.mozilla.com/firefox/'  		},  		safari: {  			text: 'Safari',  			url: 'http://www.apple.com/safari/download/'  		},  		opera: {  			text: 'Opera',  			url: 'http://www.opera.com/download/'  		},  		msie: {  			text: 'Microsoft Edge',  			url: 'http://www.microsoft.com/'  		}  	},  	// Pop-up Window Text  	header: 'Did you know that your Internet Browser is out of date?',  	paragraph1: 'Your browser is out of date, and may not be compatible with '+  				'our website. A list of the most popular web browsers can be '+  				'found below.',  	paragraph2: 'Just click on the icons to get to the download page',  	// Allow closing of window  	close: true,  	// Message displayed below closing link  	closeMessage: 'By closing this window you acknowledge that your experience '+  					'on this website may be degraded',  	closeLink: 'Close This Window',  	closeURL: '#',  	// Allows closing of window with esc key  	closeESC: true,  	// Use cookies to remmember if window was closed previously?  	closeCookie: false,  	// Cookie settings are only used if closeCookie is true  	cookieSettings: {  		// Path for the cookie to be saved on  		// Should be root domain in most cases  		path: '/',  		// Expiration Date (in seconds)  		// 0 (default) means it ends with the current session  		expires: 0  	},  	// Path where images are located  	imagePath: './img/browsers/',  	// Background color for overlay  	overlayBgColor: '#000',  	// Background transparency (0-1)  	overlayOpacity: 0.8,  	// Fade in time on open ('slow','medium','fast' or integer in ms)  	fadeInTime: 'fast',  	// Fade out time on close ('slow','medium','fast' or integer in ms)  	fadeOutTime: 'fast',  	// Google Analytics Link Tracking (Optional)  	// Set to true to enable  	// Note: Analytics tracking code must be added separately  	analytics: false  });   //---------------------------------------//  // Подключаем скрипты компонентов страниц ( modules )  //---------------------------------------//  var mobileSwitch = false;  function openCategories() {  	var wrap = $('.js-select-wrap');  	if (wrap.length) {  		if ($(window).width() < 768) {  			if (!mobileSwitch) {  				mobileSwitch = true;  				wrap.each(function () {  					var that = $(this),  							select = that.find('.js-categories-select'),  							list = that.find('.js-categolies-list');  					select.on('click', function() {  						var self = $(this);  						self.toggleClass('active');  						list.slideToggle(300);  					})  				})  			}  		} else {  			if (mobileSwitch) {  				$('.js-categories-select').removeClass('active').off('click');  				$('.js-categolies-list').removeAttr('style');  				mobileSwitch = false;  			}  		}  	}  }  openCategories();  $(window).on('resize', openCategories);
  function contactsMap() {    var mapBlock = $('#map-contacts');    if (mapBlock.length) {      try {        jQuery.getScript('https://api-maps.yandex.ru/2.1/?lang=ru_RU', function() {               ymaps.ready(init);          var myMap;          function init() {            var multiRoute = new ymaps.multiRouter.MultiRoute({                // Описание опорных точек мультимаршрута.                referencePoints: [                    [59.907029, 30.299799],                    "Двинская ул., 3"                ],                // Параметры маршрутизации.                params: { results: 2 }            }, {                // Автоматически устанавливать границы карты так, чтобы маршрут был виден целиком.                boundsAutoApply: true,                routeActiveStrokeWidth: 7,                routeActiveStrokeColor: "#ef5249"            });            var myMap = new ymaps.Map('map-contacts', {                center: [59.909375, 30.255441],                zoom: 12,                controls: []            });            // Добавляем мультимаршрут на карту.            myMap.geoObjects.add(multiRoute);          }        })      } catch(e) {        console.log(e);      }         }  }  contactsMap();
  function widthForSubmenu() {  	var widthNav = $('.js-width').width();  	var widthSubmenu = $('.js-submenu').width(widthNav);  }  widthForSubmenu();  $(window).on('resize', widthForSubmenu);  function openMenu() {  	$('.js-btn-open').on('click', function() {  		$('.js-menu-open').toggleClass('active');  		$(this).toggleClass('active');  	})  	$('.js-menu-close').on('click', function() {  		$('.js-menu-open').removeClass('active');  	})  	$(document).on('click', function(e){  		if (!$(e.target).closest('.js-wrapp-nav').length) {  			$('.js-menu-open').removeClass('active');  		}  	})  }  openMenu();  function openSubmenu() {  	$('.js-more-big').on('click', function() {  		$('.js-submenu').toggleClass('active');  	})  	$('.js-back').on('click', function() {  		$('.js-submenu').removeClass('active');  	})  	$('.js-more-small').on('click', function() {  		$('.js-submenu-small').toggleClass('active');  	})  	$('.js-back').on('click', function() {  		$('.js-submenu-small').removeClass('active');  	})  }  openSubmenu();
  function heroSlider() {  	var flag = false;    function init() {      if (window.innerWidth < 767) {        if (!flag) {          $('.js-hero-slider').slick({            slidesToShow: 1,            arrows: false,            dots: true          });          flag = true;        }      } else {        if (flag) {          $('.js-hero-slider').slick('unslick');          flag = false;        }      }    }    if ($('.js-hero-slider').length) {      init();      $(window).on('resize', init);    }  }  heroSlider();
  ;(function($) {    function contactsMap() {      var mapBlock = $('#map');      if (mapBlock.length) {        try {          jQuery.getScript('https://api-maps.yandex.ru/2.1/?lang=ru_RU', function() {                 ymaps.ready(init);            var myMap,                myPlacemark;            function init() {              myMap = new ymaps.Map("map", {                center: [59.909375, 30.255441],                zoom: 15,                controls: []              });              myPlacemark = new ymaps.Placemark([59.909375, 30.255441], {                hintContent: 'Двинская ул., 3',                balloonContent: 'Двинская ул., 3'              }, {                iconLayout: 'default#image',                iconImageHref: 'img/location.png',                iconImageSize: [35, 49],                iconImageOffset: [-5, -50]              });              myMap.geoObjects.add(myPlacemark);              myMap.behaviors.disable('scrollZoom');            }          })        } catch(e) {          console.log(e);        }           }    }    contactsMap();  }($));
  function worksMobile() {    var flag = false;    function init() {      if (window.innerWidth < 767) {        if (!flag) {          $('.js-works-slider').slick({            infinite: false,            slidesToShow: 2,            swipe: false,            responsive: [            {              breakpoint: 545,              settings: {                slidesToShow: 1              }            }            ]          });          flag = true;        }      } else {        if (flag) {          setTimeout(function() {            $('.js-works-slider').slick('unslick');            flag = false;          }, 300)        }      }    };    if ($('.js-works-slider').length) {      init();      $(window).on('resize', init);    };    $(window).on('resize', function() {      if (window.innerWidth < 767) {        $('.our-works__col--more').css('display','none');      } else {        $('.our-works__col--more').removeAttr('style');      }    });    $(window).on('load', function () {      if (window.innerWidth < 767) {        $('.our-works__col--more').css('display','none');      } else {        $('.our-works__col--more').removeAttr('style');      }    });    $('.slick-next').on('click', function () {      if ($('.our-works__col').eq($('.our-works__col').length - 2).hasClass('slick-active')) {        $('.slick-next').css('display','none');      }    });    $('.slick-prev').on('click', function () {      $('.slick-next').removeAttr('style');    })  }  worksMobile();  function mobileList() {    // if (window.innerWidth < 1024) {      var list = $('.js-out-list'),      btn = $('.js-our-select');      btn.on('click', function() {        list.toggleClass('show');      });      $(document).on('click', function(e) {        var target = $(e.target);        if (!target.closest('.js-our-wrap').length && $('.js-out-list').hasClass('show')) {          $('.js-out-list').removeClass('show');        }      })    // }  }  mobileList();  ;  (function($) {    function rulerShow() {      var $wrap = $('.js-ruler');      if ($wrap.length) {        var $btnMore = $('.js-form-btn'),          $parent = $('.js-form-parent'),          $formMore = $('.js-form-more');        $btnMore.on('click', function(e) {          if ($btnMore.hasClass('active')) {            e.preventDefault();            $formMore.addClass('active');            $parent.addClass('show');            $btnMore.removeClass('active');          } else {            $('form').validate({              submitHandler: function(form) {                $.ajax({                  type: 'POST',                  url: 'send.php',                  data: $(form).serialize(),                  success: function(response) {                    $('.js-send-ok').trigger('click');                    setTimeout(function() {                      $.fancybox.close();                    }, 2000)                  }                });              }            });          }        })      }    }    rulerShow();  }($));  function mainCalc() {    function init() {      var are = $('.js-ruler-area').val(),        repairs = $('.js-ruler-type-select').val(),        ceiling = $('.js-ruler-ceiling').val(),        type = +$('.js-ruler-radio').closest('.js-ruler-radio-item').find('.js-ruler-radio:checked').attr('data-value'),        total = are * ceiling * repairs * type,        totalPrice = total.toFixed(2);      if (Number.isInteger(total)) {        $('.js-ruler-price').text(String(total).replace(/(\d)(?=(\d{3})+(\D|$))/g, '$1 '));        $('.js-ruler-price-input').val(total);      } else {        $('.js-ruler-price').text(String(totalPrice).replace(/(\d)(?=(\d{3})+(\D|$))/g, '$1 '));        $('.js-ruler-price-input').val(totalPrice);      }    }    $(document).ready(function() {      init();    });    $('.js-ruler-area').keyup(function() {      init();    });    $('.js-ruler-radio').on('change', function() {      init();    });    if (window.innerWidth > 767) {      $('.js-ruler-type-select').selectmenu({          change: function(event, data) {            init();          }        });        $('.js-ruler-ceiling').selectmenu({          change: function(event, data) {            init();          }        });    } else {  //    $('.js-ruler-type-select').selectmenu('destroy');  //    $('.js-ruler-ceiling').selectmenu('destroy');    }    $(window).on('resize', function () {      if (window.innerWidth > 767) {        $('.js-ruler-type-select').selectmenu({            change: function(event, data) {              init();            }          });          $('.js-ruler-ceiling').selectmenu({            change: function(event, data) {              init();            }          });      } else {        $('.js-ruler-type-select').selectmenu('destroy');        $('.js-ruler-ceiling').selectmenu('destroy');      }    });    $('.js-ruler-type-select').on('change', function() {      init();    });    $('.js-ruler-ceiling').on('change', function() {      init();    });  }  mainCalc();  function calcAcceptance() {    function init() {      var are = ($('.js-ruler-acceptance').val() * 50),        type = +$('.js-ruler-options-radio').closest('.js-ruler-options-item').find('.js-ruler-options-radio:checked').val(),        addOptions = +$('.js-ruler-add-check').closest('.js-ruler-add-item').find('.js-ruler-add-check:checked').val() * $('.js-ruler-acceptance').val(),        totalPrice = are + type + addOptions;      if ($('.js-ruler-add-check').closest('.js-ruler-add-item').find('.js-ruler-add-check:checked').length == 1 && $('.js-ruler-options-radio').hasClass('active')) {        $('.js-ruler-price-value').text(String(totalPrice).replace(/(\d)(?=(\d{3})+(\D|$))/g, '$1 '));        $('.js-ruler-price-value-input').val(totalPrice);      } else if ($('.js-ruler-add-check').closest('.js-ruler-add-item').find('.js-ruler-add-check:checked').length == 1 && !$('.js-ruler-options-radio').hasClass('active')) {        $('.js-ruler-price-value').text(String(are + addOptions).replace(/(\d)(?=(\d{3})+(\D|$))/g, '$1 '));        $('.js-ruler-price-value-input').val(are + addOptions);      } else if ($('.js-ruler-add-check').closest('.js-ruler-add-item').find('.js-ruler-add-check:checked').length > 1 && $('.js-ruler-options-radio').hasClass('active')) {        var multiCheckType = 0;        $(".js-ruler-add-check:checked").each(function() {          multiCheckType += parseInt($(this).val()) * $('.js-ruler-acceptance').val();        });        var totalOptionsType = are + type + multiCheckType;        $('.js-ruler-price-value').text(String(totalOptionsType).replace(/(\d)(?=(\d{3})+(\D|$))/g, '$1 '));        $('.js-ruler-price-value-input').val(totalOptionsType);      } else if ($('.js-ruler-add-check').closest('.js-ruler-add-item').find('.js-ruler-add-check:checked').length > 1 && !$('.js-ruler-options-radio').hasClass('active')) {        var multiCheck = 0;        $(".js-ruler-add-check:checked").each(function() {          multiCheck += parseInt($(this).val()) * $('.js-ruler-acceptance').val();        });        var totalOptions = are + multiCheck;        $('.js-ruler-price-value').text(String(totalOptions).replace(/(\d)(?=(\d{3})+(\D|$))/g, '$1 '));        $('.js-ruler-price-value-input').val(totalOptions);      } else if ($('.js-ruler-options-radio').hasClass('active')) {        $('.js-ruler-price-value').text(String(are + type).replace(/(\d)(?=(\d{3})+(\D|$))/g, '$1 '));        $('.js-ruler-price-value-input').val(are + type);      } else {        $('.js-ruler-price-value').text(String(are).replace(/(\d)(?=(\d{3})+(\D|$))/g, '$1 '));        $('.js-ruler-price-value-input').val(are);      }    }    $(document).ready(function() {      init();    });    var handle = $('.js-ruler-acceptance');    $('.js-ruler-range').slider({      range: 'min',      value: 40,      min: 10,      max: 350,      create: function() {        handle.val($(this).slider('value'));      },      slide: function(event, ui) {        handle.val(ui.value);        init();      }    });    $('.js-ruler-acceptance').keyup(function() {      init();      $('.js-ruler-range').slider('value', $('.js-ruler-acceptance').val());    });    $('.js-ruler-add-check').on('change', function() {      init();    });    $('.js-ruler-options-radio').on('change', function() {      init();    });    $('.js-ruler-options-radio').on('click', function() {      if ($(this).hasClass('active')) {        $(this).removeClass('active').prop('checked', false);      } else {        $('.js-ruler-options-radio').removeClass('active');        $(this).addClass('active');      }      init();    });  }  calcAcceptance();  ;  (function() {    function stagesTabs() {      var wrap = $('.js-stages-tabs-wrap'),        flag = false;      function init() {        if (window.innerWidth > 767) {          if (!flag) {            wrap.each(function() {              var self = $(this),                tab = self.find('.js-stages-tab'),                content = self.find('.js-stages-tab-content');              tab.on('click', function(e) {                e.preventDefault();                var href = $(this).attr('href');                tab.removeClass('active');                $(this).addClass('active');                content.removeClass('active');                $(href).addClass('active');              })            });          }        } else {          if (flag) {            wrap.each(function() {              var self = $(this),                tab = self.find('.js-stages-tab'),                content = self.find('.js-stages-tab-content');              tab.off('click').removeClass('active');              content.removeClass('active');            })          }        }      }      if (wrap.length) {        init();        $(window).on('resize', init);      }    }    stagesTabs();    function mobileStagesSlider() {      var flag = false;      function init() {        if (window.innerWidth < 768) {          if (!flag) {            $(".js-mobile-show").slick({              slidesToShow: 1,              infinite: false,              asNavFor: ".js-nav-show"            });            $(".js-nav-show").slick({              slidesToShow: 1,              asNavFor: ".js-mobile-show",              focusOnSelect: true,              infinite: false,              arrows: false            });            flag = true;          }        } else {          if (flag) {            $(".js-mobile-show").slick("unslick");            $(".js-nav-show").slick("unslick");            flag = false;          }        }      }      if ($(".js-nav-show").length) {        init();        $(window).on('resize', init);      }    }    mobileStagesSlider();    function infoMobile() {      $('.js-info-btn').on('click', function() {        $(this).toggleClass('active');        $(this).closest('.stages-repair__info').find('.js-info-collapse').slideToggle();      });      $('.slick-arrow').on('click', function() {        $('.js-info-btn').removeClass('active');        $('.js-info-collapse').slideUp();      });      $(window).on('resize', function() {        if (window.innerWidth > 767) {          $('.js-info-collapse').removeAttr('style');        }      });    }    infoMobile();  }());  function usedMobileSlider() {    var flag = false;    function init() {      if (window.innerWidth < 670) {        if (!flag) {          $('.js-mobile-used').slick({            infinite: false,            slidesToShow: 2,            responsive: [{              breakpoint: 545,              settings: {                slidesToShow: 1              }            }]          });          flag = true;        }      } else {        if (flag) {          setTimeout(function() {            $('.js-mobile-used').slick('unslick');            flag = false;          }, 300)        }      }    }    if ($('.js-mobile-used').length) {      init();      $(window).on('resize', init);    }  }  usedMobileSlider();  function sliderWork() {  	$('.js-slider-for').slick({  		slidesToShow: 3,  		slidesToScroll: 1,  		arrows: false,  		fade: false,  		infinite: true,  		centerMode: true,  		centerPadding: 0,  		asNavFor: '.js-slider-nav',  		draggable: false,  		responsive: [  			{  				breakpoint: 768,  				settings: {  					slidesToShow: 1,  					slidesToScroll: 1  				}  			}  		]  	});  	$('.js-slider-nav').slick({  		slidesToShow: 6,  		infinite: false,  		asNavFor: '.js-slider-for',  		focusOnSelect: true,  		draggable: false  	});  }  sliderWork();  //---------------------------------------//  // Подключаем основные скрипты ( develop )  //---------------------------------------//  ;  (function($) {    function accordeon() {      $('.js-acc-title').on('click', function() {        $(this).closest('.js-acc-item').find('.js-acc-content').slideToggle(500);        $(this).toggleClass('active');      })    }    accordeon();    function tabs() {      var $wrap = $('.js-tabs-wrap');      if ($wrap.length) {        $wrap.each(function() {          var $that = $(this),            $tab = $that.find('.js-tab'),            $content = $that.find('.js-tab-content');          $tab.on('click', function(e) {            e.preventDefault();            var self = $(this),              index = self.index();            self.addClass('active').siblings().removeClass('active');            $content.eq(index).addClass('active').siblings().removeClass('active');          });        });      }    }    tabs();    function select() {      var flag = false;      function init() {        if (window.innerWidth > 767) {          if (!flag) {            $('.js-select').selectmenu();            flag = true;          }        } else {          if (flag) {            $( '.js-select' ).selectmenu( 'destroy' );          }        }      };      if ($('.js-select').length) {        init();        $(window).on('resize', init);      };    }    select();    function scrollId() {      $('.js-scroll').on('click', function(event) {        event.preventDefault();        var id = $(this).attr('href'),          top = $(id).offset().top;        $('body,html').animate({          scrollTop: top        }, 1500);      });    }    scrollId();  }($));  autoFooter();})$(window).on('resize', function() {  autoFooter();})